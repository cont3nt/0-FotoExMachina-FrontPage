tinymce.PluginManager.add("inline_code", function(e) {
    e.addButton("inline_code", {
        text: "",
        icon: "code",
        tooltip: "Inline Code",
        onclick: function() {
            var selected_content = tinyMCE.activeEditor.selection.getContent();
            e.insertContent("<code><pre>"+selected_content+"</pre></code>");
        }
    }), e.addMenuItem("inline_code", {
        text: "inline_code plugin",
        context: "tools",
        onclick: function() {
            e.windowManager.open({
                title: "TinyMCE site",
                url: "http://www.tinymce.com",
                width: 800,
                height: 600,
                buttons: [{
                    text: "Close",
                    onclick: "close"
                }]
            })
        }
    })
});